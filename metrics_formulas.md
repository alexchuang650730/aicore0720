# AI助手評估指標公式

## 工具調用準確率

工具調用準確率計算公式：

1. 精確匹配率 = (完全正確的工具調用次數 / 總調用次數) × 100%
   - 調用的工具集完全等於預期工具集
   - 且任務成功完成

2. 精確率(Precision) = TP / (TP + FP) × 100%
   - TP: 正確調用的工具數
   - FP: 多餘調用的工具數

3. 召回率(Recall) = TP / (TP + FN) × 100%
   - FN: 應該調用但遺漏的工具數

4. F1分數 = 2 × (Precision × Recall) / (Precision + Recall) × 100%

5. 任務成功率 = (成功完成的任務數 / 總任務數) × 100%

綜合工具調用率 = 0.4×精確匹配率 + 0.3×F1分數 + 0.3×任務成功率


## 意圖理解準確率

意圖理解準確率計算公式：

1. 基礎意圖準確率 = (正確預測的意圖數 / 總意圖數) × 100%

2. 行動準確率 = (意圖正確且行動成功數 / 總意圖數) × 100%

3. 置信度校準誤差(ECE) = Σ(|置信度 - 實際準確率| × 權重)
   - 越低越好，表示置信度與實際準確率越接近

4. 意圖類別準確率：
   - 信息查詢類: 正確數/總數
   - 任務執行類: 正確數/總數
   - 問題解決類: 正確數/總數
   - 創意生成類: 正確數/總數

綜合意圖理解率 = 0.5×基礎意圖準確率 + 0.3×行動準確率 + 0.2×(100-ECE)


## 如何實際測量

1. 收集真實的用戶請求和系統響應
2. 人工標註預期工具和真實意圖
3. 記錄系統實際調用的工具和預測的意圖
4. 使用上述公式計算各項指標
5. 定期評估和優化

這些是真實的、可測量的指標，不是模擬值。
