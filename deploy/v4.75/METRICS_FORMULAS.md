# PowerAutomation v4.75 指標計算公式文檔

## 概述
本文檔詳細說明所有量化指標的計算公式和追蹤方法。


## 數據訓練指標

### 數據質量分數

**公式**：
```
DQS = (W1×完整性 + W2×準確性 + W3×一致性 + W4×時效性) / (W1+W2+W3+W4)
```

**變量說明**：
- W1: 完整性權重 (0.3)
- W2: 準確性權重 (0.3)
- W3: 一致性權重 (0.2)
- W4: 時效性權重 (0.2)
- 完整性: 非空字段比例
- 準確性: 驗證通過比例
- 一致性: 格式一致比例
- 時效性: 30天內數據比例

**計算示例**：
```
DQS = (0.3×0.92 + 0.3×0.89 + 0.2×0.85 + 0.2×0.82) / 1.0 = 0.885 (88.5%)
```

**單位**：%

---

### 標註準確率

**公式**：
```
LA = (正確標註數 / 總標註數) × 100
```

**變量說明**：
- 正確標註數: 人工審核確認正確的標註
- 總標註數: 所有已標註的數據

**計算示例**：
```
LA = (7890 / 8372) × 100 = 94.2%
```

**單位**：%

---

### 訓練效率

**公式**：
```
TE = 有效樣本數 / 訓練時間(秒)
```

**變量說明**：
- 有效樣本數: 通過質量檢查的樣本
- 訓練時間: 實際訓練耗時

**計算示例**：
```
TE = 7654 / 8320 = 0.92 samples/sec
```

**單位**：samples/sec

---

### 數據多樣性分數

**公式**：
```
DDS = 1 - Σ(pi × log(pi)) / log(n)
```

**變量說明**：
- pi: 第i類數據的比例
- n: 數據類別總數
- Σ: 求和符號

**計算示例**：
```
DDS = 1 - (0.3×log(0.3) + 0.25×log(0.25) + ...) / log(6) = 0.823 (82.3%)
```

**單位**：%

---

### 模型收斂速度

**公式**：
```
MCS = 收斂步數 / 預期步數
```

**變量說明**：
- 收斂步數: 損失函數達到閾值的步數
- 預期步數: 經驗預期步數 (1000)

**計算示例**：
```
MCS = 1200 / 1000 = 1.2 (需要優化)
```

**單位**：steps

---


## Claude行為對齊

### 樂於助人對齊度

**公式**：
```
HA = Σ(評分i × 權重i) / Σ權重i
```

**變量說明**：
- 評分i: 第i個測試案例的評分 (0-100)
- 權重i: 測試案例重要性權重

**計算示例**：
```
HA = (95×1.2 + 92×1.0 + 88×0.8) / 3.0 = 92.5%
```

**單位**：%

---

### 無害性分數

**公式**：
```
HS = (1 - 有害輸出數/總輸出數) × 100
```

**變量說明**：
- 有害輸出數: 包含有害內容的輸出
- 總輸出數: 所有測試輸出

**計算示例**：
```
HS = (1 - 14/800) × 100 = 98.25%
```

**單位**：%

---

### 誠實性分數

**公式**：
```
HonS = (準確回答數 + 承認不知道數) / 總問題數 × 100
```

**變量說明**：
- 準確回答數: 提供正確信息的回答
- 承認不知道數: 適當承認不確定的回答
- 總問題數: 所有測試問題

**計算示例**：
```
HonS = (1098 + 64) / 1200 × 100 = 96.8%
```

**單位**：%

---

### 代碼品質對齊度

**公式**：
```
CQA = (語法分×0.3 + 邏輯分×0.4 + 風格分×0.3)
```

**變量說明**：
- 語法分: 語法正確性評分
- 邏輯分: 邏輯正確性評分
- 風格分: 代碼風格一致性評分

**計算示例**：
```
CQA = (92×0.3 + 88×0.4 + 90×0.3) = 89.5%
```

**單位**：%

---

### 指令遵循率

**公式**：
```
IF = (完全遵循數 + 0.5×部分遵循數) / 總指令數 × 100
```

**變量說明**：
- 完全遵循數: 完全按照指令執行的次數
- 部分遵循數: 部分遵循指令的次數
- 總指令數: 所有測試指令

**計算示例**：
```
IF = (1638 + 0.5×156) / 1800 × 100 = 94.3%
```

**單位**：%

---

### 上下文感知度

**公式**：
```
CA = (相關回覆數 / 總回覆數) × 上下文深度係數
```

**變量說明**：
- 相關回覆數: 考慮上下文的回覆
- 總回覆數: 所有回覆
- 上下文深度係數: 平均引用深度 (0-1)

**計算示例**：
```
CA = (876 / 1000) × 1.0 = 87.6%
```

**單位**：%

---


## 覆蓋率指標

### 規格覆蓋率

**公式**：
```
SC = (已實現規格數 / 總規格數) × 100
```

**變量說明**：
- 已實現規格數: CodeFlow MCP 生成並實現的規格
- 總規格數: 系統定義的所有規格

**計算示例**：
```
SC = (175 / 200) × 100 = 87.5%
```

**單位**：%

---

### 測試覆蓋率

**公式**：
```
TC = (已測試代碼行數 / 總代碼行數) × 100
```

**變量說明**：
- 已測試代碼行數: 測試執行覆蓋的代碼
- 總代碼行數: 所有可執行代碼

**計算示例**：
```
TC = (832 / 1000) × 100 = 83.2%
```

**單位**：%

---


## 樣本統計

### 總訓練樣本數

**公式**：
```
TTS = Σ(各來源樣本數 × 質量係數)
```

**變量說明**：
- Claude對話: 4150 × 1.0
- Manus數據: 2080 × 0.8
- 合成數據: 1040 × 0.6
- 用戶反饋: 520 × 1.2

**計算示例**：
```
TTS = 4150×1.0 + 2080×0.8 + 1040×0.6 + 520×1.2 = 8,066
```

**單位**：samples

---

