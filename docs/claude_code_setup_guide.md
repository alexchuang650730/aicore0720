# Claude Code + PowerAutomation K2 è·¯ç”±é…ç½®æŒ‡å—

## ðŸŽ¯ **ç›®æ ‡**
é…ç½® Claude Code ä½¿ç”¨ PowerAutomation çš„ K2 è·¯ç”±ï¼Œå®Œå…¨é¿å… Claude æ¨¡åž‹æœåŠ¡ä½™é¢æ¶ˆè€—ã€‚

## ðŸ”§ **é…ç½®æ­¥éª¤**

### **ç¬¬ä¸€æ­¥ï¼šè¿è¡Œä»£ç†é…ç½®è„šæœ¬**

åœ¨æ‚¨çš„ aicore0716 ç›®å½•ä¸­è¿è¡Œï¼š

```bash
cd /Users/alexchuang/Desktop/alex/tests/package1/aicore0716
bash claude_code_proxy_config.sh
```

è¿™å°†åˆ›å»ºï¼š
- ðŸ”§ Claude API ä»£ç†æœåŠ¡å™¨
- ðŸš€ ä»£ç†å¯åŠ¨è„šæœ¬
- âš™ï¸ çŽ¯å¢ƒå˜é‡é…ç½®

### **ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ä»£ç†æœåŠ¡å™¨**

åœ¨**ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£**ä¸­å¯åŠ¨ä»£ç†ï¼š

```bash
bash ~/.powerautomation/proxy/start_claude_proxy.sh
```

æ‚¨åº”è¯¥çœ‹åˆ°ï¼š
```
ðŸš€ Claude API ä»£ç†æœåŠ¡å™¨å·²å¯åŠ¨
ðŸ“ ç›‘å¬åœ°å€: http://127.0.0.1:8080
ðŸŽ¯ æ‰€æœ‰ Claude API è¯·æ±‚å°†è·¯ç”±åˆ° PowerAutomation K2 æœåŠ¡
```

### **ç¬¬ä¸‰æ­¥ï¼šé…ç½®çŽ¯å¢ƒå˜é‡**

åœ¨**ç¬¬äºŒä¸ªç»ˆç«¯çª—å£**ä¸­é…ç½®çŽ¯å¢ƒå˜é‡ï¼š

```bash
source ~/.powerautomation/proxy/claude_code_env.sh
```

æ‚¨åº”è¯¥çœ‹åˆ°ï¼š
```
âœ… Claude Code çŽ¯å¢ƒå˜é‡å·²é…ç½®
ðŸ”„ API è¯·æ±‚å°†è·¯ç”±åˆ°: http://127.0.0.1:8080
ðŸŽ¯ PowerAutomation K2 æœåŠ¡å°†å¤„ç†æ‰€æœ‰ AI æŽ¨ç†
```

### **ç¬¬å››æ­¥ï¼šå¯åŠ¨ Claude Code**

åœ¨**åŒä¸€ä¸ªç»ˆç«¯çª—å£**ï¼ˆå·²é…ç½®çŽ¯å¢ƒå˜é‡ï¼‰ä¸­å¯åŠ¨ Claude Codeï¼š

```bash
cd /Users/alexchuang/Desktop/alex/tests/package1/aicore0716
claude
```

## âœ… **éªŒè¯é…ç½®**

### **æµ‹è¯• 1ï¼šæ£€æŸ¥ä»£ç†è¿žæŽ¥**
åœ¨ Claude Code ä¸­è¾“å…¥ï¼š
```
> hi
```

å¦‚æžœé…ç½®æˆåŠŸï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š
- âŒ **ä¸å†å‡ºçŽ°** "Credit balance too low" é”™è¯¯
- âœ… **æ­£å¸¸å“åº”** æ¥è‡ª K2 æœåŠ¡çš„å›žå¤

### **æµ‹è¯• 2ï¼šæ£€æŸ¥ä»£ç†æ—¥å¿—**
åœ¨ä»£ç†æœåŠ¡å™¨ç»ˆç«¯ä¸­ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š
```
ðŸ”„ æ‹¦æˆª Claude API è¯·æ±‚: /v1/messages
ðŸ“ è¯·æ±‚æ•°æ®: {...}
âœ… K2 è·¯ç”±æˆåŠŸï¼Œè¿”å›žå“åº”
```

## ðŸ”„ **å·¥ä½œåŽŸç†**

```
Claude Code â†’ æœ¬åœ°ä»£ç† (127.0.0.1:8080) â†’ PowerAutomation K2 â†’ å“åº”
     â†‘                                                              â†“
çŽ¯å¢ƒå˜é‡é‡å®šå‘                                                    è½¬æ¢æ ¼å¼
```

1. **çŽ¯å¢ƒå˜é‡é‡å®šå‘** - Claude Code çš„ API è¯·æ±‚è¢«é‡å®šå‘åˆ°æœ¬åœ°ä»£ç†
2. **è¯·æ±‚æ‹¦æˆª** - ä»£ç†æœåŠ¡å™¨æ‹¦æˆªæ‰€æœ‰ Claude API è¯·æ±‚
3. **æ ¼å¼è½¬æ¢** - å°† Claude API æ ¼å¼è½¬æ¢ä¸º K2 API æ ¼å¼
4. **K2 è·¯ç”±** - å‘é€åˆ° PowerAutomation K2 æœåŠ¡è¿›è¡Œ AI æŽ¨ç†
5. **å“åº”è½¬æ¢** - å°† K2 å“åº”è½¬æ¢å›ž Claude API æ ¼å¼
6. **è¿”å›žç»“æžœ** - Claude Code æŽ¥æ”¶åˆ°æ­£å¸¸çš„ API å“åº”

## ðŸŽ¯ **æ ¸å¿ƒä¼˜åŠ¿**

- âœ… **é›¶ä½™é¢æ¶ˆè€—** - å®Œå…¨é¿å… Claude æ¨¡åž‹æœåŠ¡è´¹ç”¨
- âœ… **æ— ç¼ä½“éªŒ** - Claude Code ä½¿ç”¨ä½“éªŒå®Œå…¨ä¸å˜
- âœ… **æ™ºèƒ½è·¯ç”±** - è‡ªåŠ¨ä½¿ç”¨ PowerAutomation K2 æœåŠ¡
- âœ… **æ ¼å¼å…¼å®¹** - å®Œå…¨å…¼å®¹ Claude API æ ¼å¼
- âœ… **å®žæ—¶ç›‘æŽ§** - ä»£ç†æ—¥å¿—æ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚å¤„ç†

## ðŸ› ï¸ **æ•…éšœæŽ’é™¤**

### **é—®é¢˜ 1ï¼šä»£ç†æœåŠ¡å™¨å¯åŠ¨å¤±è´¥**
```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :8080

# å¦‚æžœè¢«å ç”¨ï¼Œæ€æ­»è¿›ç¨‹
kill -9 $(lsof -t -i:8080)

# é‡æ–°å¯åŠ¨ä»£ç†
bash ~/.powerautomation/proxy/start_claude_proxy.sh
```

### **é—®é¢˜ 2ï¼šçŽ¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ**
```bash
# æ£€æŸ¥çŽ¯å¢ƒå˜é‡
echo $ANTHROPIC_API_URL
echo $CLAUDE_API_URL

# å¦‚æžœä¸ºç©ºï¼Œé‡æ–°é…ç½®
source ~/.powerautomation/proxy/claude_code_env.sh
```

### **é—®é¢˜ 3ï¼šä»ç„¶å‡ºçŽ°ä½™é¢é”™è¯¯**
```bash
# ç¡®ä¿åœ¨é…ç½®äº†çŽ¯å¢ƒå˜é‡çš„ç»ˆç«¯ä¸­å¯åŠ¨ Claude Code
source ~/.powerautomation/proxy/claude_code_env.sh
claude
```

## ðŸ“‹ **å¿«é€Ÿå¯åŠ¨è„šæœ¬**

åˆ›å»ºä¸€ä¸ªå¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼š

```bash
cat > ~/start_claude_with_k2.sh << 'EOF'
#!/bin/bash
echo "ðŸš€ å¯åŠ¨ Claude Code + PowerAutomation K2 è·¯ç”±..."

# å¯åŠ¨ä»£ç†æœåŠ¡å™¨ï¼ˆåŽå°è¿è¡Œï¼‰
bash ~/.powerautomation/proxy/start_claude_proxy.sh &
PROXY_PID=$!

# ç­‰å¾…ä»£ç†å¯åŠ¨
sleep 3

# é…ç½®çŽ¯å¢ƒå˜é‡
source ~/.powerautomation/proxy/claude_code_env.sh

# å¯åŠ¨ Claude Code
cd /Users/alexchuang/Desktop/alex/tests/package1/aicore0716
claude

# æ¸…ç†ï¼šåœæ­¢ä»£ç†æœåŠ¡å™¨
kill $PROXY_PID
EOF

chmod +x ~/start_claude_with_k2.sh
```

ç„¶åŽåªéœ€è¿è¡Œï¼š
```bash
bash ~/start_claude_with_k2.sh
```

## ðŸŽ‰ **æˆåŠŸæ ‡å¿—**

é…ç½®æˆåŠŸåŽï¼Œæ‚¨å°†çœ‹åˆ°ï¼š
- âœ… Claude Code æ­£å¸¸å¯åŠ¨å’Œå“åº”
- âœ… ä»£ç†æ—¥å¿—æ˜¾ç¤ºè¯·æ±‚æ‹¦æˆªå’Œè·¯ç”±
- âœ… ä¸å†å‡ºçŽ°ä½™é¢ä¸è¶³é”™è¯¯
- âœ… æ‰€æœ‰ AI æŽ¨ç†é€šè¿‡ K2 æœåŠ¡å¤„ç†

**çŽ°åœ¨æ‚¨å¯ä»¥æ— é™åˆ¶åœ°ä½¿ç”¨ Claude Codeï¼Œè€Œä¸æ¶ˆè€—ä»»ä½• Claude æ¨¡åž‹æœåŠ¡ä½™é¢ï¼** ðŸš€

